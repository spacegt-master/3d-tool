<template>
    <TresCanvas v-bind="gl">
        <TresPerspectiveCamera :position="[400, 400, 400]" :far="5000" />
        <OrbitControls />

        <Suspense>
            <Environment :background="true" :files="hdrPath" :blur="0.35" />
        </Suspense>

        <TresDirectionalLight :position="[150, 200, 250]" :intensity="1.5" cast-shadow />

        <TresDirectionalLight :position="[-150, 100, -200]" :intensity="0.8" />

        <TresDirectionalLight :position="[0, 200, -250]" :intensity="1.0" />

        <TresAmbientLight :intensity="0.5" />

        <ModelLoader v-if="raw" :url="getRawBlobUrl()" />

        <ModelWatcher v-if="raw" />

    </TresCanvas>
</template>

<script setup lang="ts">
import { BasicShadowMap, SRGBColorSpace, ACESFilmicToneMapping } from 'three';

const propertiesPanelStore = usePropertiesPanelStore()

const { raw } = storeToRefs(propertiesPanelStore)

const gl = {
    clearColor: '#6e7786', // 新的背景颜色
    shadows: true,
    alpha: false,
    shadowMapType: BasicShadowMap,
    outputColorSpace: SRGBColorSpace,
    toneMapping: ACESFilmicToneMapping,
    toneMappingExposure: 1.2,
};
</script>

<style scoped></style>